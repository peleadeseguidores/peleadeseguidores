<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Registro de Jugador</title>
</head>
<body>
  <h2>Registro de Jugador</h2>

  <form id="form">
    <label>Usuario de Instagram (@):</label><br>
    <input type="text" id="username" name="username" required><br><br>

    <label>Subir foto:</label><br>
    <input type="file" id="photo" name="photo" accept="image/*" required><br><br>

    <button type="submit">Registrar</button>
  </form>

  <p id="result"></p>

  <script>
    document.getElementById("form").addEventListener("submit", async function(event) {
      event.preventDefault();

      const username = document.getElementById("username").value;
      const fileInput = document.getElementById("photo").files[0];

      if (!fileInput) {
        alert("Por favor selecciona una foto");
        return;
      }

      const reader = new FileReader();
      reader.onloadend = async function() {
        const base64String = reader.result.split(",")[1]; 

        try {
          const response = await fetch("https://script.google.com/macros/s/AKfycbwsw5B14bXgtTt0hM0C4G1X2Qv3sjTW4qXsv7TCjTYCqoLs4Yke-l9euD4XYJeUUdxF/exec", {
            method: "POST",
            body: JSON.stringify({
              username: username,
              filename: fileInput.name,
              photo: base64String
            }),
            headers: {
              "Content-Type": "application/json"
            }
          });

          const text = await response.text();
          document.getElementById("result").innerText = text;
        } catch (err) {
          document.getElementById("result").innerText = "Error: " + err.message;
        }
      };

      reader.readAsDataURL(fileInput);
    });
  </script>
</body>
</html>


